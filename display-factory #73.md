# [Sub task] updated Display Factory в trying-lit #1349

сейчас в trying-lit

контент передается статический. мне он нужен был чтобы провалидировать работу.

![1](https://user-images.githubusercontent.com/1469198/180264523-d1f36cec-66c5-41f8-8152-02da6905296b.png "1")

есть 2 варианта решения нашей проблемы

1. вместо этой функции мы просто передаем строку {content} и наш реплейсер это должен хавать.
т.е.

`let addon1 = {
  footer: FooterHTMLString,
  logoTop: logoTopComponent(),
  logoBottom: logoBottomComponent(),
  content: "{content}",
  // content: '[[THIS IS PLACE FOR A CONTENT INSIDE]',
  previewText: previewTextComponent('[AMA PREVIEW TEXT]'),
};`

сделает похожий темплейт как есть у нас сейчас.

2. вариант более сложный но правильный. нам нужно будет извне передать наш контент и собрать "display" у нас в генераторе. или например просто добавить функционала в trying_lit.
рано или поздно нам прийдется это сделать, чтобы извне пихать нужные нам переменные

Originally posted by @atherdon in [#1344 (comment)](https://github.com/LLazyEmail/markdown-to-email/issues/1344#issuecomment-1191695447)

[![Watch the video](https://user-images.githubusercontent.com/1469198/180372109-d0e10db9-0765-4d20-9b93-a2993776ff8a.png)](https://user-images.githubusercontent.com/1469198/180372109-d0e10db9-0765-4d20-9b93-a2993776ff8a.mp4)

LLazyEmail/nomoretogo_email_template#116

https://github.com/LLazyEmail/template-object

# "ограничения" DisplayFactory #116

**Arthur Tkachenko**

"одним из плюсов factory design pattern в js является то что мы не создаем "новый instance" как обычно получается с классами. тоесть после создания объекта - мы не можем управлять данными. нельзя нормально сделать _get, _set и т.д.

возможно позже мы перепишем часть функционала на typescript и сможем использовать их типы данных, но сейчас есть как есть.

я изначально хотел бы добавить внутрь factory методы которые позволили бы менять settings & params.

из важных штук которые бы хотелось иметь:

1. массив с проверками на ошибки( checksArray ), чтобы немного централизовать их.
Например мы собираем темлпейт, при этом фейлим в футере и в хеаде. хочется чтобы при запуске сборки темлейта у нас выдавались ошибки из обоих displays и прерывалось создание темлпейта.

2. изменение сеттингов в уже готовом объекте

3. init(то что у нас сейчас делает `create`)

4. и лог метод чтобы каждый раз не писать console.log

что скажете.

я думал сделать это таким образом. создать отдельный класс в котором будут эти методы. а factory будет все собирать и возвращать уже объект со всеми settings которые мы передаем

я вынес все factory в https://github.com/LLazyEmail/template-object

пока только обсуждаем, возможно подключим Вадима и обсудим вместе next steps

sample: https://blog.sessionstack.com/how-javascript-works-the-factory-design-pattern-4-use-cases-7b9f0d22151d

Да, в этом таске кстати удобно было бы обсудить улучшения текущей версии этой Factory.
если что, я готов обсуждать"

**web4uartstudio**

"ввиду Ваших старых проектов и желания прийти к универсальному решению (один для всех) у меня вопрос: я тоже в данном обсуждении или на лавочке запасных пока побуду. А то как то запутался. Обычно реагировал на блоки тасков отдельно выделенные под меня."

**Arthur Tkachenko**

Я добавил всех в этот таск чтобы обсудить что делать дальше с factory.
Просто не всегда ж сразу есть понимание как и какую задачу делать.
Collaboration это д часть процесса.

Вадим сегодня впервые ее увидел, но при этом ему тоже нужно знать как и
зачем я ее создавал. Плюс нам нужно будет прийти к тому, чтобы Вадим вас
вел по проекту.

**web4uartstudio**

Я вижу пока 2 варианта:

1. Общий factory а внутри разные class каждый под свой display
2. Попробовать реализовать универсальный class с итерациями и проверками

Какой вариант будем реализовывать ?

**Arthur Tkachenko**

Пока что нас нужно закончить прошлые таски где мы выводим компоненты внутри
display.

Плюс мне сложно судить пока я не увижу вариант с кодом.

**web4uartstudio**

Ок, тогда я доделаю display по старой схеме а потом реализуем factory.

Каждый раз отвлекаюсь и забываю, я буду очень благодарен когда обращение ко мне будет на "ты". Я в свою очередь обещаю никому об этом не рассказывать)

**Arthur Tkachenko**

Мы сейчас уже делаем display objects with factory design pattern.

А когда мы сделаем этот таск в нас будет factory + доп фишки, которые мне
нужны

**web4uartstudio**

@atherdon Добрый день.
Сижу уже часа 3 не могу собрать главный контент/компонент(фото продуктов). Существуют компоненты которые дублируют друг друга отчасти (recipeComponent, tableWithTwoRecipes, get-content). В памяти многое попуталось почему мы это делали, а возможно нужно было удалить старые версии. Одним словом "подзавис" от воспоминаний. Потом вспомнил и нашел [#34](https://github.com/LLazyEmail/nomoretogo_email_template/issues/34) , где по сути этот создание этого компонента на мне не было и я его делал без таска расписанного на меня "самоволка".

Теперь возникает вопрос: мне использовать мой вариант "get-content"?

Не могло так получится что мы просто (без обвинений, это как версия) не добавили в главный репозиторий новую версию для которой мы делали "tableWithTwoRecipes" ? @atherdon

**Arthur Tkachenko**

@web4uartstudio можете кинуть ссылки на компоненты, чтоб я не искал их? плохо пока ориентируюсь в наших папках.

в финальной версии(для использования в генераторе Markdown to Email), этот блок нам нужен в "разобранном виде".
тоесть чтобы мы могли "рендерить"/выводить внутри этого блока данные из разных рассылок.

а в каждой рассылке будет свой title, subtitle, свое описание и другие рецепты.
поидее, когда вы начнете делать display для этого блока, вы должны столкнутся с тем, что у вас есть куча данных, которые нужно засунуть в `settings` и передать в `factory` - для того чтобы этот блок мог реально выводится

при этом, можно сделать вначале быстрый вариант. если у вас "контент" находится в одном файле/компоненты - мы можем сделать простой display для того, чтобы начать тестирование работы сборки целого теплейта.
но я сейчас пока еще не понял в каком состоянии унас находится - поэтому давайте вначале разберемся

я ж добавляю все ваши изменения. если какого то компонента нет - тут я скорее всего не виноват.
но т.к. в нашем репозитории есть история всех изменений - мы легко можем пройтись по ней и найти компонент который нам нужен

кстати, если мы сделаем пример иерархии наших компонентов например в readme - мы потом проще сможем "бегать" по файлам, чтобы смотреть что находится внутри.
хотите такое сделать @web4uartstudio ? я могу найти шаблон и закинуть в readme.md

добавил шаблон в readme.md

![2](https://user-images.githubusercontent.com/1469198/177513053-4bed5b6b-2335-43e6-861e-cf697d836352.png "2")

**web4uartstudio**

Скорее всего надо будет. Но ввиду того что мы файлы гоняем по папкам появляются дубликаты а иногда не полные(в 1 из дубликатов производятся изменения), становится все сложней и сложней не запутаться.
Я принял решение полностью сейчас переделать компонент с рецептами. Приведу к одной версии, поделю на компоненты. Так будет проще. @atherdon
